jQuery(document).ready(function(e){e(document).on("click","#wpm-validate-openai-key",function(o){o.preventDefault();let p=e("#wpm-openai-secretkey").val(),i=e("#wpm-openai-provider").val(),a=p.trim();if(0===a.length){e("#wpm-secret-key-error").show();return}e("#wpm-secret-key-error").hide(),e(".wpm-openai-api-success-note").hide(),e(".wpm-openai-provider-note").hide(),e(this).addClass("updating-message"),e.ajax({url:ajaxurl,type:"POST",data:{action:"wpm_validate_secret_key",provider:i,secret_key:a,security:wpm_openai_params.wpmpro_openai_nonce},success:function(o){if(e("#wpm-validate-openai-key").removeClass("updating-message"),o.success){let p=o.data.models,i="";e.each(p,function(e,o){i+=`<option value="${o}">${o}</option>`}),e("#wpm-openai-models").html(i),e(".wpm-openai-api-success-note").show(),e(".wpm-openai-api-success-note").text(o.data.message)}else o.data&&o.data.message&&(e(".wpm-openai-api-success-note").show(),e(".wpm-openai-api-success-note").text(o.data.message))}})}),e(document).on("change","#wpm-openai-provider",function(o){o.preventDefault(),e("#wpm-secret-key-error").hide(),e(".wpm-openai-api-success-note").hide(),e(".wpm-openai-provider-note").hide(),e("#wpm-openai-secretkey").length>0&&e("#wpm-openai-secretkey").val(""),e("#wpm-openai-models").length>0&&e("#wpm-openai-models").html('<option value="">Models Not Available</option>');let p=e(this).val();"multilang"===p?(e(".wpm-hide-openai-wrapper").hide(),wpm_openai_params.is_pro_active?wpm_openai_params.is_pro_active&&"active"!==wpm_openai_params.license_status?(e(".wpm-openai-provider-note").show(),e(".wpm-license-error-note").html('<span class="wpm-upgrade-to-pro-note" style="font-weight: 500;"> Your license key is inactive or expired</span>')):e(".wpm-openai-provider-note").hide():(e(".wpm-openai-provider-note").show(),e(".wpm-license-error-note").html('<span class="wpm-upgrade-to-pro-note" style="font-weight: 500;"> This Feature requires the <a href="https://wp-multilang.com/pricing/#pricings" target="__blank">Premium Version</span>'))):(0===wpm_openai_params.ai_settings.model.length&&(e(".wpm-license-error-note").html('<span class="wpm-upgrade-to-pro-note" style="font-weight: 500;"> Please configure OpenAI settings</span>'),e(".wpm-license-error-note").show()),e(".wpm-hide-openai-wrapper").show(),e(".wpm-openai-provider-note").hide()),e("#wpmpro-what-all-opt").prop("checked",!1).trigger("change"),e(".wpmpro-language-cb").prop("checked",!1).trigger("change")}),e(document).on("click","#wpm-save-openai-settings",function(o){o.preventDefault();let p=e("#wpm-openai-provider").val().trim(),i=e("#wpm-openai-models").val().trim();if(console.log("provider ",p),console.log("model ",i),"multilang"!==p||wpm_openai_params.is_pro_active){if("multilang"===p||"openai"===p){if("openai"===p&&0===i.length){alert("Please validate api key and select model");return}e.ajax({url:ajaxurl,type:"POST",data:{action:"wpm_save_openai_settings",provider:p,model:i,security:wpm_openai_params.wpmpro_openai_nonce},success:function(e){window.location.reload(!0)}})}else{alert("Please select provider");return}}})});