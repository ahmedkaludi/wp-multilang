jQuery(document).ready(function(e){e(document).on("click","#wpm-validate-openai-key",function(i){i.preventDefault();let a=e("#wpm-openai-secretkey").val(),o=a.trim();if(0===o.length){e("#wpm-secret-key-error").show();return}provider="openai",e("#wpm-secret-key-error").hide(),e(".wpm-openai-api-success-note").hide(),e(".wpm-openai-api-error-note").hide(),e(".wpm-openai-provider-note").hide(),e(this).addClass("updating-message"),e.ajax({url:ajaxurl,type:"POST",data:{action:"wpm_validate_secret_key",provider:provider,secret_key:o,security:wpm_openai_params.wpmpro_openai_nonce},success:function(i){if(e("#wpm-validate-openai-key").removeClass("updating-message"),i.success){let a=i.data.models,o="";e.each(a,function(e,i){o+=`<option value="${i}">${i}</option>`}),e("#wpm-hide-openai-models-wrapper").show(),e("#wpm-openai-models").html(o),e(".wpm-openai-api-success-note").show(),e(".wpm-openai-api-success-note").text(i.data.message)}else i.data&&i.data.message&&(e(".wpm-openai-api-error-note").show(),e(".wpm-openai-api-error-note").text(i.data.message))}})}),e(document).on("click","#wpm-save-openai-settings",function(i){i.preventDefault(),e("#wpm-secret-key-error").hide();let a="openai",o="";e("#wpm-openai-models").length>0&&(o=e("#wpm-openai-models").val())&&(o=o.trim());let n="0";e("#wpm_openai_integration").is(":checked")&&(n="1"),console.log("provider ",a),console.log("model ",o);let p=e("#wpm-save-openai-settings");if("openai"===a)e(p).prop("disabled",!0).text("Saving Changes..."),e.ajax({url:ajaxurl,type:"POST",data:{action:"wpm_save_openai_settings",provider:a,model:o,wpm_openai_integration:n,security:wpm_openai_params.wpmpro_openai_nonce},success:function(e){window.location.reload(!0)}});else{alert("Please select provider");return}}),e(document).on("click","#wpm_openai_integration",function(i){e(this).is(":checked")?(e(".wpm-openai-children").show(),0===wpm_openai_params.ai_settings.model.length&&e("#wpm-hide-openai-models-wrapper").hide()):e(".wpm-openai-children").hide()})});